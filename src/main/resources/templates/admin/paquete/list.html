<!-- Paquetes List -->
<main class="flex-1 p-6" xmlns:th="http://www.thymeleaf.org">
    <!-- Header -->
    <th:block th:replace="~{fragments/admin-common :: pageHeader(titulo='Gestion de Paquetes', subtitulo='Administra los paquetes turisticos', btnUrl='/admin/paquetes/nuevo', btnTexto='Nuevo Paquete')}" />

    <!-- Filtros -->
    <th:block th:replace="~{fragments/filters :: simpleFilter(actionUrl='/admin/paquetes', filtroBusqueda=${filtroBusqueda}, filtroEstado=${filtroEstado}, placeholder='Buscar por nombre de paquete o destino...')}" />

    <!-- Tabla de Paquetes -->
    <div class="bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden">
        <table class="min-w-full divide-y divide-gray-200">
            <thead class="bg-gray-50">
                <tr>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ID</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Nombre</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Destino</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Fechas</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Precio</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Stock</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Estado</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Acciones</th>
                </tr>
            </thead>
            <tbody class="bg-white divide-y divide-gray-200">
                <tr th:if="${#lists.isEmpty(paquetes)}" class="text-center">
                    <td colspan="8" class="px-6 py-8 text-gray-500">No hay paquetes registrados</td>
                </tr>
                <tr th:each="paquete : ${paquetes}" class="hover:bg-gray-50">
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900" th:text="${paquete.idPaquete}">1</td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="text-sm font-medium text-gray-900" th:text="${paquete.nombre}">Nombre</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500" th:text="${paquete.destino?.nombre}">Destino</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                        <span th:text="${#temporals.format(paquete.fechaInicio, 'dd/MM/yyyy')}">01/01/2024</span>
                        -
                        <span th:text="${#temporals.format(paquete.fechaFin, 'dd/MM/yyyy')}">05/01/2024</span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-red-600" th:text="'S/ ' + ${#numbers.formatDecimal(paquete.precio, 1, 2)}">S/ 0.00</td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <span th:class="'px-2 py-1 text-xs font-medium rounded-full ' +
                            (${paquete.stockDisponible > 5} ? 'bg-green-100 text-green-800' :
                            (${paquete.stockDisponible > 0} ? 'bg-yellow-100 text-yellow-800' : 'bg-red-100 text-red-800'))"
                            th:text="${paquete.stockDisponible}">0</span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <span th:class="'px-2 py-1 text-xs font-medium rounded-full ' +
                            (${paquete.estado == 'ACT'} ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800')"
                            th:text="${paquete.estado == 'ACT'} ? 'Activo' : 'Inactivo'">Activo</span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2">
                        <a th:href="@{/admin/paquetes/{id}/editar(id=${paquete.idPaquete})}"
                           class="text-blue-600 hover:text-blue-800">Editar</a>
                        <button type="button"
                                th:data-id="${paquete.idPaquete}"
                                th:data-estado="${paquete.estado}"
                                data-entity="paquete"
                                onclick="toggleEstado(this)"
                                th:class="(${paquete.estado == 'ACT'} ? 'text-red-600 hover:text-red-800' : 'text-green-600 hover:text-green-800')"
                                th:text="${paquete.estado == 'ACT'} ? 'Desactivar' : 'Activar'">Toggle</button>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

    <!-- Paginacion -->
    <th:block th:replace="~{fragments/admin-common :: paginationContainer(baseUrl='/admin/paquetes', currentPage=${currentPage}, totalPages=${totalPages}, filtroEstado=${filtroEstado}, filtroBusqueda=${filtroBusqueda})}" />
</main>

<th:block th:replace="~{fragments/admin-common :: toggleScript}" />
