<!--
================================================================================
DETALLE DE PAQUETE - paquete/detail.html
================================================================================
Vista que muestra el detalle completo de un paquete turistico.

MODELO ESPERADO (PaqueteView):
- idPaquete: Integer
- nombre, descripcion: String
- precio: BigDecimal
- fechaInicioFormateada, fechaFinFormateada: String (formato dd/MM/yyyy)
- nombreDestino: String (puede ser null)
- stockDisponible: Integer

URL: /paquetes/{id}
CONTROLADOR: PaqueteWebController.detalle()

ACCIONES:
- "Agregar al carrito" -> /carrito/agregar/{id} (si hay stock)
- "Volver" -> /paquetes
================================================================================
-->

<section class="max-w-7xl mx-auto px-6 py-10">

    <!-- ═══════════════════════════════════════════════════════════════════════
         NAVEGACION - Breadcrumb
    ═══════════════════════════════════════════════════════════════════════ -->
    <nav class="mb-6 text-sm text-gray-500">
        <a th:href="@{/}" class="hover:text-red-600">Inicio</a>
        <span class="mx-2">/</span>
        <a th:href="@{/paquetes}" class="hover:text-red-600">Paquetes</a>
        <span class="mx-2">/</span>
        <span th:text="${paquete.nombre}" class="text-gray-700">Detalle</span>
    </nav>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">

        <!-- ═══════════════════════════════════════════════════════════════════
             COLUMNA IZQUIERDA: Imagen del paquete
        ═══════════════════════════════════════════════════════════════════ -->
        <div>
            <img th:src="@{/img/hero_3.jpg}"
                 th:alt="${paquete.nombre}"
                 class="rounded-lg object-cover w-full h-96">
        </div>

        <!-- ═══════════════════════════════════════════════════════════════════
             COLUMNA DERECHA: Informacion del paquete
        ═══════════════════════════════════════════════════════════════════ -->
        <div>
            <!-- Nombre del paquete -->
            <h2 class="text-3xl font-bold mb-2" th:text="${paquete.nombre}">
                Nombre del Paquete
            </h2>

            <!-- Destino (opcional) -->
            <p th:if="${paquete.nombreDestino}" class="text-gray-500 mb-4">
                Destino: <span class="font-medium text-gray-700" th:text="${paquete.nombreDestino}">Destino</span>
            </p>

            <!-- Fechas del paquete -->
            <div class="flex items-center gap-4 mb-4 text-sm text-gray-600">
                <div>
                    <span class="font-medium">Inicio:</span>
                    <span th:text="${paquete.fechaInicioFormateada}">00/00/0000</span>
                </div>
                <div>
                    <span class="font-medium">Fin:</span>
                    <span th:text="${paquete.fechaFinFormateada}">00/00/0000</span>
                </div>
            </div>

            <!-- Descripcion -->
            <p class="text-gray-700 mb-6" th:text="${paquete.descripcion}">
                Descripcion completa del paquete turistico...
            </p>

            <!-- Precio -->
            <div class="mb-6">
                <span class="text-3xl font-bold text-red-600">
                    S/ <span th:text="${#numbers.formatDecimal(paquete.precio, 1, 2)}">0.00</span>
                </span>
                <span class="text-sm text-gray-500 ml-2">por persona</span>
            </div>

            <!--
            BADGE DE STOCK
            - Verde si hay stock disponible
            - Rojo si esta agotado
            -->
            <div class="mb-6">
                <span th:if="${paquete.stockDisponible != null and paquete.stockDisponible != '0'}"
                      class="inline-block bg-green-100 text-green-800 text-sm px-3 py-1 rounded-full">
                    <span th:text="${paquete.stockDisponible}">0</span> lugares disponibles
                </span>
                <span th:if="${paquete.stockDisponible == null or paquete.stockDisponible == '0'}"
                      class="inline-block bg-red-100 text-red-800 text-sm px-3 py-1 rounded-full">
                    Agotado
                </span>
            </div>

            <!-- ═══════════════════════════════════════════════════════════════
                 BOTONES DE ACCION
                 - Agregar al carrito: Solo si hay stock
                 - Volver: Siempre visible
            ═══════════════════════════════════════════════════════════════ -->
            <div class="flex flex-wrap gap-4">

                <!-- Boton: Agregar al Carrito (activo si hay stock) -->
                <a th:if="${paquete.stockDisponible != null and paquete.stockDisponible != '0'}"
                   th:href="@{/carrito/agregar/{id}(id=${paquete.idPaquete})}"
                   class="bg-red-600 text-white px-8 py-3 rounded-lg hover:bg-red-700 transition inline-flex items-center gap-2">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"/>
                    </svg>
                    Agregar al carrito
                </a>

                <!-- Boton: Agregar al Carrito (deshabilitado si no hay stock) -->
                <span th:if="${paquete.stockDisponible == null or paquete.stockDisponible == '0'}"
                      class="bg-gray-400 text-white px-8 py-3 rounded-lg cursor-not-allowed inline-flex items-center gap-2">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"/>
                    </svg>
                    Agregar al carrito
                </span>

                <!-- Boton: Volver a la lista -->
                <a th:href="@{/paquetes}"
                   class="border border-gray-300 text-gray-700 px-8 py-3 rounded-lg hover:bg-gray-50 transition">
                    Volver
                </a>
            </div>
        </div>
    </div>

</section>
