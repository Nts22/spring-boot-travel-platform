<section class="max-w-4xl mx-auto px-6 py-10">

    <!-- Breadcrumb -->
    <nav class="mb-6 text-sm text-gray-500">
        <a th:href="@{/}" class="hover:text-red-600">Inicio</a>
        <span class="mx-2">/</span>
        <a th:href="@{/reservas}" class="hover:text-red-600">Mis Reservas</a>
        <span class="mx-2">/</span>
        <span class="text-gray-700">Reserva #<span th:text="${reserva.idReserva}">1</span></span>
    </nav>

    <div class="bg-white rounded-lg shadow-lg p-8">

        <!-- Cabecera -->
        <div class="flex justify-between items-start mb-6 pb-6 border-b">
            <div>
                <h2 class="text-2xl font-bold text-gray-800">
                    Reserva #<span th:text="${reserva.idReserva}">1</span>
                </h2>
                <p class="text-gray-500 text-sm mt-1">
                    Creada el <span th:text="${reserva.fechaCreacionFormateada}">01/01/2025</span>
                </p>
            </div>
            <span th:class="${reserva.estadoReserva == 'PENDIENTE' ? 'bg-yellow-100 text-yellow-800' :
                             (reserva.estadoReserva == 'CONFIRMADA' ? 'bg-green-100 text-green-800' :
                             'bg-gray-100 text-gray-800')} + ' px-4 py-2 rounded-full font-medium'"
                  th:text="${reserva.estadoReserva}">PENDIENTE</span>
        </div>

        <!-- Items de la Reserva (Paquetes) -->
        <div class="mb-6">
            <h3 class="text-lg font-semibold text-gray-700 mb-3">Paquetes Reservados</h3>

            <div th:each="item, iterStat : ${reserva.items}" class="bg-gray-50 rounded-lg p-4 mb-4">
                <div class="flex justify-between items-start mb-2">
                    <div>
                        <p class="text-xl font-bold text-gray-800" th:text="${item.nombrePaquete}">Nombre del Paquete</p>
                        <p class="text-gray-600">Destino: <span th:text="${item.nombreDestino}">Destino</span></p>
                        <p class="text-gray-600">Fecha de viaje: <span th:text="${item.fechaViajeInicioFormateada}">01/01/2025</span></p>
                        <p class="text-gray-500 text-sm mt-1">Precio base: <span th:text="${item.precioPaqueteFormateado}">S/ 0.00</span></p>
                    </div>
                    <p class="text-red-600 font-bold text-lg" th:text="${item.subtotalFormateado}">S/ 0.00</p>
                </div>

                <!-- Servicios Adicionales del Item -->
                <div th:if="${item.serviciosAdicionales != null and !#lists.isEmpty(item.serviciosAdicionales)}" class="mt-4 pt-4 border-t border-gray-200">
                    <p class="text-sm font-medium text-gray-600 mb-2">Servicios adicionales:</p>
                    <table class="w-full text-sm">
                        <thead class="bg-gray-100">
                            <tr>
                                <th class="px-3 py-1 text-left">Servicio</th>
                                <th class="px-3 py-1 text-right">Precio Unit.</th>
                                <th class="px-3 py-1 text-center">Cant.</th>
                                <th class="px-3 py-1 text-right">Subtotal</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr th:each="servicio : ${item.serviciosAdicionales}" class="border-b border-gray-100">
                                <td class="px-3 py-1" th:text="${servicio.nombreServicio}">Servicio</td>
                                <td class="px-3 py-1 text-right" th:text="${servicio.costoUnitarioFormateado}">S/ 0.00</td>
                                <td class="px-3 py-1 text-center" th:text="${servicio.cantidad}">1</td>
                                <td class="px-3 py-1 text-right font-medium" th:text="${servicio.subtotalFormateado}">S/ 0.00</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Total -->
        <div class="border-t pt-6">
            <div class="flex justify-between items-center">
                <span class="text-xl font-bold text-gray-800">Total a Pagar:</span>
                <span class="text-3xl font-bold text-red-600" th:text="${reserva.totalPagarFormateado}">S/ 0.00</span>
            </div>
        </div>

        <!-- Botones -->
        <div class="mt-8 flex gap-4">
            <a th:href="@{/reservas}"
               class="border border-gray-300 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-50 transition">
                Volver a Mis Reservas
            </a>
        </div>
    </div>

</section>
